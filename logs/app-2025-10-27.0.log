2025-10-27 12:13:06 [http-nio-8082-exec-6] INFO  c.erp.valid.service.OtpCacheService - Cache HIT for email: mmousa@ezzsteel.com.eg
2025-10-27 12:13:06 [http-nio-8082-exec-6] WARN  com.erp.valid.service.UserService - Invalid OTP attempt for email: mmousa@ezzsteel.com.eg
2025-10-27 12:13:16 [http-nio-8082-exec-5] ERROR com.erp.valid.util.JwtUtil - Invalid JWT token: JWT expired 8516881 milliseconds ago at 2025-10-27T06:51:20.000Z. Current time: 2025-10-27T09:13:16.881Z. Allowed clock skew: 0 milliseconds.
2025-10-27 12:13:16 [http-nio-8082-exec-5] INFO  com.erp.valid.service.UserService - Login attempt for email: mmousa@ezzsteel.com.eg
2025-10-27 12:13:18 [http-nio-8082-exec-4] ERROR com.erp.valid.util.JwtUtil - Invalid JWT token: JWT expired 8518302 milliseconds ago at 2025-10-27T06:51:20.000Z. Current time: 2025-10-27T09:13:18.302Z. Allowed clock skew: 0 milliseconds.
2025-10-27 12:13:18 [http-nio-8082-exec-4] INFO  com.erp.valid.service.UserService - Login attempt for email: mmousa@ezzsteel.com.eg
2025-10-27 12:18:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-27 12:18:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-27 12:18:11 [main] INFO  com.erp.valid.ValidApplication - Starting ValidApplication using Java 23 with PID 12132 (C:\Users\mmousa\Desktop\valid\target\classes started by Mmousa in C:\Users\mmousa\Desktop\valid)
2025-10-27 12:18:11 [main] DEBUG com.erp.valid.ValidApplication - Running with Spring Boot v3.5.6, Spring v6.2.11
2025-10-27 12:18:11 [main] INFO  com.erp.valid.ValidApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-27 12:18:12 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-27 12:18:12 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-10-27 12:18:12 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-27 12:18:13 [main] DEBUG c.e.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-27 12:18:13 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-27 12:18:13 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-10-27 12:18:13 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-27 12:18:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-27 12:18:13 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:erpdb user=SA
2025-10-27 12:18:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-27 12:18:13 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-27 12:18:13 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 2.3.232
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-10-27 12:18:14 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-27 12:18:15 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-27 12:18:15 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 100f888b-6a60-45cb-9f57-a02ce3a32dc4

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-10-27 12:18:15 [main] INFO  com.erp.valid.ValidApplication - Started ValidApplication in 4.552 seconds (process running for 5.285)
2025-10-27 12:18:28 [http-nio-8082-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-27 12:18:28 [http-nio-8082-exec-1] INFO  com.erp.valid.service.UserService - Attempting to register user with email: mmousa@ezzsteel.com.eg
2025-10-27 12:18:28 [http-nio-8082-exec-1] INFO  com.erp.valid.service.UserService - User registered successfully with ID: 1
2025-10-27 12:18:28 [http-nio-8082-exec-1] INFO  c.erp.valid.service.OtpCacheService - OTP stored in cache for email: mmousa@ezzsteel.com.eg
2025-10-27 12:18:44 [http-nio-8082-exec-3] INFO  com.erp.valid.service.UserService - Attempting to verify OTP for email: mmousa@ezzsteel.com.eg
2025-10-27 12:18:44 [http-nio-8082-exec-3] INFO  c.erp.valid.service.OtpCacheService - Cache HIT for email: mmousa@ezzsteel.com.eg
2025-10-27 12:18:44 [http-nio-8082-exec-3] WARN  com.erp.valid.service.UserService - Invalid OTP attempt for email: mmousa@ezzsteel.com.eg
2025-10-27 12:18:49 [email-async-1] ERROR com.erp.valid.service.EmailService - Failed to send OTP email to: mmousa@ezzsteel.com.eg
org.springframework.mail.MailSendException: Mail server connection failed. Failed messages: org.eclipse.angus.mail.util.MailConnectException: Couldn't connect to host, port: smtp.gmail.com, 587; timeout -1;
  nested exception is:
	java.net.ConnectException: Connection timed out: connect
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:410)
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:317)
	at org.springframework.mail.MailSender.send(MailSender.java:42)
	at com.erp.valid.service.EmailService.sendOtpEmail(EmailService.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:360)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:114)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.eclipse.angus.mail.util.MailConnectException: Couldn't connect to host, port: smtp.gmail.com, 587; timeout -1
	at org.eclipse.angus.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2243)
	at org.eclipse.angus.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:729)
	at jakarta.mail.Service.connect(Service.java:345)
	at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:480)
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:399)
	... 13 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:760)
	at java.base/java.net.Socket.connect(Socket.java:695)
	at org.eclipse.angus.mail.util.SocketFetcher.createSocket(SocketFetcher.java:368)
	at org.eclipse.angus.mail.util.SocketFetcher.getSocket(SocketFetcher.java:243)
	at org.eclipse.angus.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2193)
	... 17 common frames omitted
2025-10-27 12:19:09 [http-nio-8082-exec-6] INFO  com.erp.valid.service.UserService - Attempting to verify OTP for email: mmousa@ezzsteel.com.eg
2025-10-27 12:19:09 [http-nio-8082-exec-6] INFO  c.erp.valid.service.OtpCacheService - Cache HIT for email: mmousa@ezzsteel.com.eg
2025-10-27 12:19:09 [http-nio-8082-exec-6] WARN  com.erp.valid.service.UserService - Invalid OTP attempt for email: mmousa@ezzsteel.com.eg
2025-10-27 12:19:11 [http-nio-8082-exec-5] ERROR com.erp.valid.util.JwtUtil - Invalid JWT token: JWT expired 8871396 milliseconds ago at 2025-10-27T06:51:20.000Z. Current time: 2025-10-27T09:19:11.396Z. Allowed clock skew: 0 milliseconds.
2025-10-27 12:19:11 [http-nio-8082-exec-5] INFO  com.erp.valid.service.UserService - Login attempt for email: mmousa@ezzsteel.com.eg
2025-10-27 12:19:13 [http-nio-8082-exec-4] DEBUG c.e.v.config.JwtAuthenticationFilter - Authenticated request from user: mmousa@ezzsteel.com.eg (ID: 1)
2025-10-27 12:19:20 [http-nio-8082-exec-7] ERROR com.erp.valid.util.JwtUtil - Invalid JWT token: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
2025-10-27 12:19:24 [http-nio-8082-exec-9] DEBUG c.e.v.config.JwtAuthenticationFilter - Authenticated request from user: mmousa@ezzsteel.com.eg (ID: 1)
2025-10-27 12:19:25 [http-nio-8082-exec-10] DEBUG c.e.v.config.JwtAuthenticationFilter - Authenticated request from user: mmousa@ezzsteel.com.eg (ID: 1)
2025-10-27 12:19:26 [http-nio-8082-exec-2] DEBUG c.e.v.config.JwtAuthenticationFilter - Authenticated request from user: mmousa@ezzsteel.com.eg (ID: 1)
2025-10-27 12:19:27 [http-nio-8082-exec-1] DEBUG c.e.v.config.JwtAuthenticationFilter - Authenticated request from user: mmousa@ezzsteel.com.eg (ID: 1)
2025-10-27 12:19:27 [http-nio-8082-exec-3] DEBUG c.e.v.config.JwtAuthenticationFilter - Authenticated request from user: mmousa@ezzsteel.com.eg (ID: 1)
