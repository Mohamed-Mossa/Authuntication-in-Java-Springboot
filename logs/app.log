2025-10-29 12:34:35 [http-nio-8082-exec-6] INFO  com.erp.valid.service.UserService - Attempting to register user with email: mmousa@ezzsteel.com.eg
2025-10-29 12:34:35 [http-nio-8082-exec-6] INFO  com.erp.valid.service.UserService - User registered successfully with ID: 1
2025-10-29 12:34:35 [http-nio-8082-exec-6] INFO  c.erp.valid.service.OtpCacheService - OTP stored in cache for email: mmousa@ezzsteel.com.eg
2025-10-29 12:34:56 [email-async-1] ERROR com.erp.valid.service.EmailService - Failed to send OTP email to: mmousa@ezzsteel.com.eg
org.springframework.mail.MailSendException: Mail server connection failed. Failed messages: org.eclipse.angus.mail.util.MailConnectException: Couldn't connect to host, port: smtp.gmail.com, 587; timeout -1;
  nested exception is:
	java.net.ConnectException: Connection timed out: connect
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:410)
	at org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:317)
	at org.springframework.mail.MailSender.send(MailSender.java:42)
	at com.erp.valid.service.EmailService.sendOtpEmail(EmailService.java:28)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:355)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:768)
	at org.springframework.aop.interceptor.AsyncExecutionInterceptor.lambda$invoke$0(AsyncExecutionInterceptor.java:113)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1575)
Caused by: org.eclipse.angus.mail.util.MailConnectException: Couldn't connect to host, port: smtp.gmail.com, 587; timeout -1
	at org.eclipse.angus.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2243)
	at org.eclipse.angus.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:729)
	at jakarta.mail.Service.connect(Service.java:345)
	at org.springframework.mail.javamail.JavaMailSenderImpl.connectTransport(JavaMailSenderImpl.java:480)
	at org.springframework.mail.javamail.JavaMailSenderImpl.doSend(JavaMailSenderImpl.java:399)
	... 14 common frames omitted
Caused by: java.net.ConnectException: Connection timed out: connect
	at java.base/sun.nio.ch.Net.connect0(Native Method)
	at java.base/sun.nio.ch.Net.connect(Net.java:589)
	at java.base/sun.nio.ch.Net.connect(Net.java:578)
	at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:583)
	at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327)
	at java.base/java.net.Socket.connect(Socket.java:760)
	at java.base/java.net.Socket.connect(Socket.java:695)
	at org.eclipse.angus.mail.util.SocketFetcher.createSocket(SocketFetcher.java:368)
	at org.eclipse.angus.mail.util.SocketFetcher.getSocket(SocketFetcher.java:243)
	at org.eclipse.angus.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2193)
	... 18 common frames omitted
2025-10-29 12:35:08 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-10-29 12:35:08 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-10-29 12:35:11 [main] INFO  com.erp.valid.ValidApplication - Starting ValidApplication using Java 23 with PID 33424 (C:\Users\mmousa\Desktop\valid\target\classes started by Mmousa in C:\Users\mmousa\Desktop\valid)
2025-10-29 12:35:11 [main] DEBUG com.erp.valid.ValidApplication - Running with Spring Boot v3.3.5, Spring v6.1.14
2025-10-29 12:35:11 [main] INFO  com.erp.valid.ValidApplication - No active profile set, falling back to 1 default profile: "default"
2025-10-29 12:35:12 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-10-29 12:35:12 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.31]
2025-10-29 12:35:12 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-10-29 12:35:12 [main] DEBUG c.e.v.config.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-10-29 12:35:13 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-10-29 12:35:13 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.5.3.Final
2025-10-29 12:35:13 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-10-29 12:35:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-10-29 12:35:13 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:erpdb user=SA
2025-10-29 12:35:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-10-29 12:35:13 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: H2Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-10-29 12:35:14 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-10-29 12:35:15 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-10-29 12:35:15 [main] WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 1332ed83-4385-4328-8579-c33a05186bc5

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2025-10-29 12:35:15 [main] INFO  com.erp.valid.ValidApplication - Started ValidApplication in 4.805 seconds (process running for 5.866)
2025-10-29 12:35:23 [http-nio-8082-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-29 12:35:23 [http-nio-8082-exec-1] INFO  com.erp.valid.service.UserService - Attempting to register user with email: mmousa@ezzsteel.com.eg
2025-10-29 12:35:23 [http-nio-8082-exec-1] INFO  com.erp.valid.service.UserService - User registered successfully with ID: 1
2025-10-29 12:35:23 [http-nio-8082-exec-1] INFO  c.erp.valid.service.OtpCacheService - OTP stored in cache for email: mmousa@ezzsteel.com.eg
2025-10-29 12:35:28 [email-async-1] INFO  com.erp.valid.service.EmailService - OTP email sent successfully to: mmousa@ezzsteel.com.eg
2025-10-29 12:35:49 [http-nio-8082-exec-3] INFO  com.erp.valid.service.UserService - Attempting to verify OTP for email: mmousa@ezzsteel.com.eg
2025-10-29 12:35:49 [http-nio-8082-exec-3] INFO  c.erp.valid.service.OtpCacheService - Cache HIT for email: mmousa@ezzsteel.com.eg
2025-10-29 12:35:49 [http-nio-8082-exec-3] INFO  c.erp.valid.service.OtpCacheService - OTP deleted from cache for email: mmousa@ezzsteel.com.eg
2025-10-29 12:35:49 [http-nio-8082-exec-3] INFO  com.erp.valid.service.UserService - User verified successfully: mmousa@ezzsteel.com.eg
2025-10-29 12:35:49 [http-nio-8082-exec-3] INFO  c.erp.valid.service.OtpCacheService - Cache Statistics - Hits: 1, Misses: 0, Hit Rate: {:.2f}%, Evictions: 100.0
2025-10-29 12:35:52 [email-async-2] INFO  com.erp.valid.service.EmailService - Welcome email sent successfully to: mmousa@ezzsteel.com.eg
2025-10-29 12:36:05 [http-nio-8082-exec-4] ERROR com.erp.valid.util.JwtUtil - Invalid JWT token: JWT expired 182685869 milliseconds ago at 2025-10-27T06:51:20.000Z. Current time: 2025-10-29T09:36:05.869Z. Allowed clock skew: 0 milliseconds.
2025-10-29 12:36:05 [http-nio-8082-exec-4] INFO  com.erp.valid.service.UserService - Login attempt for email: mmousa@ezzsteel.com.eg
2025-10-29 12:36:06 [http-nio-8082-exec-4] WARN  com.erp.valid.service.UserService - Failed login attempt for email: mmousa@ezzsteel.com.eg
2025-10-29 12:36:09 [http-nio-8082-exec-5] ERROR com.erp.valid.util.JwtUtil - Invalid JWT token: JWT expired 182689573 milliseconds ago at 2025-10-27T06:51:20.000Z. Current time: 2025-10-29T09:36:09.573Z. Allowed clock skew: 0 milliseconds.
2025-10-29 12:36:09 [http-nio-8082-exec-5] INFO  com.erp.valid.service.UserService - Login attempt for email: mmousa@ezzsteel.com.eg
2025-10-29 12:36:09 [http-nio-8082-exec-5] INFO  com.erp.valid.service.UserService - User logged in successfully: mmousa@ezzsteel.com.eg
2025-10-29 12:36:27 [http-nio-8082-exec-6] DEBUG c.e.v.config.JwtAuthenticationFilter - Authenticated request from user: mmousa@ezzsteel.com.eg (ID: 1)
2025-10-29 12:36:31 [http-nio-8082-exec-7] ERROR com.erp.valid.util.JwtUtil - Invalid JWT token: JWT signature does not match locally computed signature. JWT validity cannot be asserted and should not be trusted.
